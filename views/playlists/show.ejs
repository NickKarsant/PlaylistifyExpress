<% layout('layouts/boilerplate') %>

<div class="row">
  <%- include('../partials/aside') %>

  <div id="showWrapper"  class="col-xs-10 col-sm-10 col-md-9 col-lg-10 mb-5 pb-5 text-white">
    <div id="gradient">

      <div class="row align-items-center">
        <div class="col-md-2 mt-2">
          <a class="btn mx-2 backAndNext" onclick="goBack()"><i class="fas fa-chevron-left"></i></a>
          <a id="forward" class="btn mx-2 backAndNext" onclick="goForward()"><i id="forward"
              class="fas fa-chevron-right"></i></a>
        </div>
      </div>



      <div id="showInfo" class="row mt-3 mb-5 col-sm-12 col-md-12 col-lg-12">
        <img id="playlistImage" style="margin-left:1em;" src="<%= playlist.image %>" alt="">
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 header">
          <p style="display:flex; align-items: center;">Playlist</p>
          <h1 class="col-xs-6 col-sm-6 col-md-6 col-lg-6"
            style="padding-left: 0; display:flex; font-size: 4em; align-items: center;">
            <%= playlist.name%></h1>
          <caption> <strong> <%= playlist.author.username %> </strong><span class="dot"></span> 0 songs, about 0 hr  0
            min </caption>

        </div>
      </div>
    </div>

    <div class="d-flex justify-content-start">

      <i id="playAll" class="btn btn-md btn-success fas fa-play"></i>


      <% if (currentUser && playlist.author.equals(currentUser._id) && playlist.name !== "Liked Songs") { %>
      <a class="" href="#" style=" margin-top: 1em;" role="button" id="dropdownMenuLink" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        <i id="playlistOptions" class="fas fa-ellipsis-h meatball btn btn-xs text-center text-white"></i>
      </a>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        <a class="dropdown-item" href="#">Add to Playlist secondary dropdown menu</a>
        <a class="dropdown-item" href="#">Another action</a>

        <a class="dropdown-item" href="#">
          <form action="/playlists/<%=playlist._id%>?_method=DELETE" method="POST">
            <button class="ui button red right">Delete</button>
          </form>
        </a>
      </div>
      <%}%>
        
      </div>





      <div id="list" class="ui mt-3">
        <div class="row mb-2" >
          <div class="col-sm-2 col-md-2 col-lg-1 text-center">#</div>
          <%if (currentUser){ %>
          <div class="col-sm-1 col-md-1 col-lg-1 text-center" style="margin-left:-1em;">Liked</div>
          <% } %>

        <div class="col-sm-3 col-md-3 col-lg-3" >Title </div>
        <div class="col-sm-3 col-md-3 col-lg-3" > Artist </div>
        <div class="col-sm-1 col-md-1 col-lg-1 text-center"><i class="far fa-clock" ></i></div>
        <%if (currentUser){ %>
        <div class="col-sm-2 col-md-2 col-lg-2 text-center">Options</div>
        <% } %>
      </div>


    <div class="row songRow" style="border-top: 1px solid grey; padding: 0.5em 0;">
      <div class="col-sm-2 col-md-2 col-lg-1 text-center">
        <span class="listIndex">1 </span>
        <i class="btn btn-success fas fa-play play listPlay" ></i>
      </div>

      <%if (currentUser){ %>
      <div class="col-sm-1 col-md-1 col-lg-1 text-center listLike" >
        <i class="far fa-heart like"></i></div>
      <% } %>

      <div class="col-sm-3 col-md-3 col-lg-3" >Name of Song </div>
      <div class="col-sm-3 col-md-3 col-lg-3" >Placeholder that is very long and</div>
      <div class="col-sm-1 col-md-1 col-lg-1 text-center" >3:00</div>
      <%if (currentUser){ %>
      <div class="col-sm-2 col-md-2 col-lg-2 text-center options" >
        <i class="fas fa-ellipsis-h meatball btn btn-xs text-center text-white" type="button" data-toggle="modal"
          data-target="#optionsMenu"></i>


      </div>
      <% } %>

    </div>
    <div class="row songRow" style="border-top: 1px solid grey; padding: 0.5em 0;">
      <div class="col-sm-2 col-md-2 col-lg-1 text-center">
        <span class="listIndex">1 </span>
        <i class="btn btn-success fas fa-play play listPlay" ></i>
      </div>

      <%if (currentUser){ %>
      <div class="col-sm-1 col-md-1 col-lg-1 text-center listLike" >
        <i class="far fa-heart like"></i></div>
      <% } %>

      <div class="col-sm-3 col-md-3 col-lg-3" >Name of Song </div>
      <div class="col-sm-3 col-md-3 col-lg-3" >Placeholder that is very long and</div>
      <div class="col-sm-1 col-md-1 col-lg-1 text-center" >3:00</div>
      <%if (currentUser){ %>
      <div class="col-sm-2 col-md-2 col-lg-2 text-center options" >
        <i class="fas fa-ellipsis-h meatball btn btn-xs text-center text-white" type="button" data-toggle="modal"
          data-target="#optionsMenu"></i>


      </div>
      <% } %>

    </div>

    <!-- <% playlist.songs.forEach(function(song, index) { %>
          <div class="row songRow" style="border-top: 1px solid grey; padding: 0.5em 0; margin-right:1em;">
            <div class="col-sm-2 col-md-2 col-lg-1 text-center">
              <span class="listIndex"><%= index + 1 %> </span>
              <i class="btn btn-success fas fa-play play listPlay"></i>
            </div>
    
            <%if (currentUser){ %>
            <div class="col-sm-1 col-md-1 col-lg-1 text-center listLike">
              <i class="far fa-heart like"></i></div>
            <% } %>
    
            <div class="col-sm-5 col-md-6 col-lg-7"> song.name </div>
            <div class="col-sm-1 col-md-1 col-lg-1"> song.length </div>
            <%if (currentUser){ %>
            <div class="col-sm-2 col-md-2 col-lg-1 text-center options">
              <span> song.json </span>
              <i class="fas fa-ellipsis-h meatball btn btn-xs text-center text-white" type="button" data-toggle="modal"
                data-target="#optionsMenu"></i>
    
    
            </div>
            <% } %>
    
          </div>
          <% }) %> -->

  </div>




</div> <br>




<div class="modal right fade" id="optionsMenu" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content" style="width: 50%;">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="padding:0;">
        <ul class="mb-0" style="list-style-type: none; padding:1em;">
          <li type="button" class="optionsChoice btn d-flex justify-content-left" data-toggle="modal"
            data-target="#playlistChoices" style="width:90%;">
            <p><i class="fas fa-chevron-left"></i> Add song to
              Playlist
            </p>
          </li>
          <li class="optionsChoice btn d-flex justify-content-left" type="button" style="width:90%;">
            <p>     Add to Liked Songs</p>
          </li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</div>